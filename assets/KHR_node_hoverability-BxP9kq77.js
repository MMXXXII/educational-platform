import{u as b,r as k}from"./model-viewer-CRf71ZHW.js";import{b as _}from"./declarationMapper-BB1D8Xqx.js";import{A as B}from"./objectModelMapping-DZbRXB0J.js";import"./with-props-CdbLO-WJ.js";import"./chunk-AYJ5UCUI-B1579ApN.js";import"./sceneFragmentDeclaration-CNWtVIbJ.js";import"./waterMaterial-DHEJP-Do.js";const d="KHR_node_hoverability",x="targetMeshPointerOver_";_("event/onHoverIn",d,{blocks:["FlowGraphPointerOverEventBlock","FlowGraphGetVariableBlock","FlowGraphIndexOfBlock","KHR_interactivity/FlowGraphGLTFDataProvider"],configuration:{stopPropagation:{name:"stopPropagation"},nodeIndex:{name:"variable",toBlock:"FlowGraphGetVariableBlock",dataTransformer(o){return[x+o[0]]}}},outputs:{values:{hoverNodeIndex:{name:"index",toBlock:"FlowGraphIndexOfBlock"},controllerIndex:{name:"pointerId"}},flows:{out:{name:"done"}}},interBlockConnectors:[{input:"targetMesh",output:"value",inputBlockIndex:0,outputBlockIndex:1,isVariable:!0},{input:"array",output:"nodes",inputBlockIndex:2,outputBlockIndex:3,isVariable:!0},{input:"object",output:"meshUnderPointer",inputBlockIndex:2,outputBlockIndex:0,isVariable:!0}],extraProcessor(o,n,i,s,t,u,e){var p,l,h,f,m,v;const a=t[t.length-1];a.config=a.config||{},a.config.glTF=e;const r=(l=(p=o.configuration)==null?void 0:p.nodeIndex)==null?void 0:l.value[0];if(r===void 0||typeof r!="number")throw new Error("nodeIndex not found in configuration");const c=x+r;return t[1].config.variable=c,u._userVariables[c]={className:"Mesh",id:(f=(h=e==null?void 0:e.nodes)==null?void 0:h[r]._babylonTransformNode)==null?void 0:f.id,uniqueId:(v=(m=e==null?void 0:e.nodes)==null?void 0:m[r]._babylonTransformNode)==null?void 0:v.uniqueId},t}});const I="targetMeshPointerOut_";_("event/onHoverOut",d,{blocks:["FlowGraphPointerOutEventBlock","FlowGraphGetVariableBlock","FlowGraphIndexOfBlock","KHR_interactivity/FlowGraphGLTFDataProvider"],configuration:{stopPropagation:{name:"stopPropagation"},nodeIndex:{name:"variable",toBlock:"FlowGraphGetVariableBlock",dataTransformer(o){return[I+o[0]]}}},outputs:{values:{hoverNodeIndex:{name:"index",toBlock:"FlowGraphIndexOfBlock"},controllerIndex:{name:"pointerId"}},flows:{out:{name:"done"}}},interBlockConnectors:[{input:"targetMesh",output:"value",inputBlockIndex:0,outputBlockIndex:1,isVariable:!0},{input:"array",output:"nodes",inputBlockIndex:2,outputBlockIndex:3,isVariable:!0},{input:"object",output:"meshOutOfPointer",inputBlockIndex:2,outputBlockIndex:0,isVariable:!0}],extraProcessor(o,n,i,s,t,u,e){var p,l,h,f,m,v;const a=t[t.length-1];a.config=a.config||{},a.config.glTF=e;const r=(l=(p=o.configuration)==null?void 0:p.nodeIndex)==null?void 0:l.value[0];if(r===void 0||typeof r!="number")throw new Error("nodeIndex not found in configuration");const c=I+r;return t[1].config.variable=c,u._userVariables[c]={className:"Mesh",id:(f=(h=e==null?void 0:e.nodes)==null?void 0:h[r]._babylonTransformNode)==null?void 0:f.id,uniqueId:(v=(m=e==null?void 0:e.nodes)==null?void 0:m[r]._babylonTransformNode)==null?void 0:v.uniqueId},t}});B("/nodes/{}/extensions/KHR_node_hoverability/hoverable",{get:o=>{const n=o._babylonTransformNode;return n&&n.pointerOverDisableMeshTesting!==void 0?n.pointerOverDisableMeshTesting:!0},set:(o,n)=>{var i;(i=n._primitiveBabylonMeshes)==null||i.forEach(s=>{s.pointerOverDisableMeshTesting=!o})},getTarget:o=>o._babylonTransformNode,getPropertyName:[()=>"pointerOverDisableMeshTesting"],type:"boolean"});class y{constructor(n){this.name=d,this._loader=n,this.enabled=n.isExtensionUsed(d)}async onReady(){var n;(n=this._loader.gltf.nodes)==null||n.forEach(i=>{var s,t,u;(s=i.extensions)!=null&&s.KHR_node_hoverability&&((t=i.extensions)==null?void 0:t.KHR_node_hoverability.hoverable)===!1&&((u=i._babylonTransformNode)==null||u.getChildMeshes().forEach(e=>{e.pointerOverDisableMeshTesting=!0}))})}dispose(){this._loader=null}}b(d);k(d,!0,o=>new y(o));export{y as KHR_node_hoverability};
