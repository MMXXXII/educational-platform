import{w as f}from"./with-props-CdbLO-WJ.js";import{w as j,o as e,s as a}from"./chunk-AYJ5UCUI-B1579ApN.js";import{u as y,C as N,L as v}from"./CourseFormFields-DVhEcTIr.js";import{F as o}from"./ArrowLeftIcon-DK87n-Vp.js";import{F as w}from"./ArrowPathIcon-CYqLai-V.js";import{P as C}from"./ProtectedRoute-CNKgV1SH.js";import"./coursesService-DenKHoiM.js";import"./config-GGwLlXRi.js";import"./indexedDB-DhaisdTJ.js";import"./index-BHLz7_dj.js";import"./TrashIcon-DeKKRKWf.js";import"./PencilIcon-DVEFDLXn.js";import"./PlusIcon-DynyqxMJ.js";import"./Bars3Icon-BkkQTm41.js";import"./XMarkIcon-D64FOle9.js";import"./AuthContext-8jqzhkGD.js";function k(){const{id:s}=j(),{course:i,errors:r,loading:t,initialLoading:n,categories:d,lessons:m,imagePreview:l,existingImageUrl:c,handleCourseChange:x,handleImageChange:u,handleRemoveImage:h,handleLessonsUpdate:p,handleSubmit:g,saveCourseDataToStorage:b}=y("edit",s);return n?e.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-16 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.fetch?e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-16 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Ошибка загрузки"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:r.fetch}),e.jsxs(a,{to:"/my-courses",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(o,{className:"h-5 w-5 mr-2"}),"Вернуться к моим курсам"]})]}):e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(a,{to:"/my-courses",className:"mr-4 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:e.jsx(o,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Редактирование курса"})]}),e.jsxs("form",{onSubmit:g,className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[e.jsx(N,{course:i,errors:r,categories:d,imagePreview:l,existingImageUrl:c,onCourseChange:x,onImageChange:u,onRemoveImage:h}),e.jsxs("div",{className:"mb-8",children:[e.jsx(v,{initialLessons:m,courseId:s,onChange:p,onNavigateToEditor:b,isEditMode:!0,errors:r}),r.lessons&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:r.lessons})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center sm:justify-end space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx(a,{to:"/my-courses",className:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-center",children:"Отмена"}),e.jsx("button",{type:"submit",disabled:t,className:`px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors ${t?"opacity-70 cursor-not-allowed":""}`,children:t?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(w,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"Сохранение..."]}):"Сохранить изменения"})]}),r.submit&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 rounded-lg",children:r.submit})]})]})}function G({}){return[{title:"Редактирование курса"},{name:"description",content:"Редактирование курса и уроков"}]}const H=f(function(){return e.jsx(C,{requiredRoles:["admin","teacher"],children:e.jsx(k,{})})});export{H as default,G as meta};
