import{Z as d,C as a}from"./sceneFragmentDeclaration-CNWtVIbJ.js";import{G as p}from"./glTFLoader-BlBnIl-i.js";import{u,r as h}from"./model-viewer-CRf71ZHW.js";import"./objectModelMapping-DZbRXB0J.js";import"./with-props-CdbLO-WJ.js";import"./chunk-AYJ5UCUI-B1579ApN.js";import"./waterMaterial-DHEJP-Do.js";const t="KHR_materials_unlit";class m{constructor(e){this.name=t,this.order=210,this._loader=e,this.enabled=this._loader.isExtensionUsed(t)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,o,r){return p.LoadExtensionAsync(e,o,this.name,()=>this._loadUnlitPropertiesAsync(e,o,r))}_loadUnlitPropertiesAsync(e,o,r){if(!(r instanceof d))throw new Error(`${e}: Material type not supported`);const n=new Array;r.unlit=!0;const s=o.pbrMetallicRoughness;return s&&(s.baseColorFactor?(r.albedoColor=a.FromArray(s.baseColorFactor),r.alpha=s.baseColorFactor[3]):r.albedoColor=a.White(),s.baseColorTexture&&n.push(this._loader.loadTextureInfoAsync(`${e}/baseColorTexture`,s.baseColorTexture,l=>{l.name=`${r.name} (Base Color)`,r.albedoTexture=l}))),o.doubleSided&&(r.backFaceCulling=!1,r.twoSidedLighting=!0),this._loader.loadMaterialAlphaProperties(e,o,r),Promise.all(n).then(()=>{})}}u(t);h(t,!0,i=>new m(i));export{m as KHR_materials_unlit};
