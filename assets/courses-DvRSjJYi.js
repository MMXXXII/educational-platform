import{w as $}from"./with-props-CdbLO-WJ.js";import{a,o as e,s as O}from"./chunk-AYJ5UCUI-B1579ApN.js";import{C as Q}from"./CourseImagePlaceholder-tHKq6nVt.js";import{F as _}from"./MagnifyingGlassIcon-GD0hpaCd.js";import{L as H,P as I,a as W}from"./PageSizeSelector-B7uZMnD3.js";import"./config-GGwLlXRi.js";import{c as U,a as Z}from"./coursesService-DenKHoiM.js";function K({title:t,titleId:i,...n},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},n),t?a.createElement("title",{id:i},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const q=a.forwardRef(K);function G({title:t,titleId:i,...n},s){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":i},n),t?a.createElement("title",{id:i},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const J=a.forwardRef(G);function X({course:t}){const i=n=>n?n.charAt(0).toUpperCase()+n.slice(1):"";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden hover:shadow-lg dark:hover:shadow-gray-700/50 transition-shadow duration-300",children:[e.jsxs("div",{className:"h-40 bg-gray-200 dark:bg-gray-700 relative",children:[e.jsx(Q,{course:t}),e.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 dark:bg-blue-500 text-white dark:text-gray-100 text-xs px-2 py-1 rounded-full",children:i(t.difficulty)})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-14 mb-2",children:e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-white line-clamp-2",children:t.title})}),e.jsx("div",{className:"h-10 mb-3",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm line-clamp-2",children:t.description})}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-3",children:[e.jsxs("span",{children:["Автор: ",t.author]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("span",{children:[t.lessons_count||0," уроков"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(J,{className:"h-4 w-4 mr-1"}),t.students_count||0," учеников"]}),e.jsx(O,{to:`/courses/${t.id}`,className:"px-3 py-1 bg-blue-600 dark:bg-blue-500 text-white dark:text-gray-100 text-sm font-medium rounded hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors",children:"Подробнее"})]})]})]})}function P({categories:t,difficulties:i,setActiveFilters:n,activeFilters:s}){const g=l=>{s.categories.includes(l)?n({...s,categories:s.categories.filter(u=>u!==l)}):n({...s,categories:[...s.categories,l]})},m=l=>{s.difficulties.includes(l)?n({...s,difficulties:s.difficulties.filter(u=>u!==l)}):n({...s,difficulties:[...s.difficulties,l]})};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow dark:shadow-gray-700/50 mb-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Категории"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t&&t.length>0?t.map(l=>e.jsx("button",{onClick:()=>g(l.value),className:`px-3 py-1 text-sm rounded-full ${s.categories.includes(l.value)?"bg-blue-600 text-white dark:bg-blue-500 dark:text-gray-100":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:l.label},l.value)):e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Загрузка категорий..."})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Уровень сложности"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(l=>e.jsx("button",{onClick:()=>m(l.value),className:`px-3 py-1 text-sm rounded-full ${s.difficulties.includes(l.value)?"bg-blue-600 text-white dark:bg-blue-500 dark:text-gray-100":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"}`,children:l.label},l.value))})]})]})}function Y({searchQuery:t,setSearchQuery:i,showFilters:n,setShowFilters:s,onKeyDown:g}){return e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow dark:shadow-gray-700/50 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Поиск курсов...",value:t,onChange:m=>i(m.target.value),onKeyDown:g,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 text-black dark:text-white bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 dark:text-gray-500"})]}),e.jsxs("button",{onClick:()=>s(!n),className:"md:hidden flex items-center justify-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(q,{className:"h-5 w-5 mr-2"}),"Фильтры"]})]})})}function F({resetFilters:t}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-24 h-24 mx-auto text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Курсы не найдены"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"По указанным параметрам поиска не удалось найти курсы. Попробуйте изменить критерии поиска или сбросить фильтры."}),e.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white dark:text-gray-100 font-medium py-2 px-6 rounded-md transition-colors",children:"Сбросить фильтры"})]})}function V(){const[t,i]=a.useState(""),[n,s]=a.useState(!1),[g,m]=a.useState([]),[l,u]=a.useState(!0),[f,N]=a.useState([]),[C,ee]=a.useState([{value:"начинающий",label:"Начинающий"},{value:"средний",label:"Средний"},{value:"продвинутый",label:"Продвинутый"}]),[o,j]=a.useState({categories:[],difficulties:[]}),[k,E]=a.useState(""),[b,p]=a.useState(1),[M,S]=a.useState(1),[y,L]=a.useState(12),[z,D]=a.useState(0);a.useEffect(()=>{const r=setTimeout(()=>{E(t)},500);return()=>{clearTimeout(r)}},[t]),a.useEffect(()=>{(async()=>{try{const x=(await Z.getCategories()).items.map(c=>({value:c.id,label:c.name}));N(x)}catch(d){console.error("Failed to fetch categories:",d),N([])}})()},[]);const w=a.useCallback(async()=>{u(!0);try{const r={page:b,size:y};if(k.trim()&&(r.search=k.trim()),o.categories.length>0){const h=o.categories.map(x=>{const c=f.find(T=>T.value===x);return c?c.label:null}).filter(Boolean);h.length>0?r.category_names=h:o.categories.length>0&&(r.category_id=o.categories[0])}if(o.difficulties.length>0){const h=["начинающий","средний","продвинутый"],x=o.difficulties.filter(c=>h.includes(c));x.length>0&&(r.difficulties=x)}const d=await U.getCourses(r);m(d.items||[]),D(d.total||0),S(Math.ceil((d.total||0)/y))}catch(r){console.error("Failed to fetch courses:",r),m([]),S(1)}finally{u(!1)}},[k,o,b,y,f]);a.useEffect(()=>{w()},[w]);const v=()=>{j({categories:[],difficulties:[]}),i(""),p(1)},R=r=>{r.key==="Enter"&&(r.preventDefault(),p(1),w())},A=r=>{window.scrollTo({top:0,behavior:"smooth"}),p(r)},B=r=>{const d=parseInt(r.target.value);L(d),p(1)};return e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8",children:[e.jsxs("div",{className:"mb-8 text-center md:text-left",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Каталог курсов"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Выбери подходящий курс и начни обучение программированию прямо сейчас"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"w-full md:w-64 hidden md:block",children:[e.jsx(P,{categories:f,difficulties:C,setActiveFilters:j,activeFilters:o}),e.jsx("button",{onClick:v,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Сбросить фильтры"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Y,{searchQuery:t,setSearchQuery:i,showFilters:n,setShowFilters:s,onKeyDown:R}),n&&e.jsx("div",{className:"mt-4 md:hidden",children:e.jsx(P,{categories:f,difficulties:C,setActiveFilters:j,activeFilters:o})}),e.jsx("div",{className:"md:hidden mb-4",children:e.jsx("button",{onClick:v,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Сбросить фильтры"})}),l?e.jsx(H,{}):g.length>0?e.jsxs(e.Fragment,{children:[e.jsx(I,{pageSize:y,onChange:B,currentPage:b,totalItems:z,itemName:"курсов"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(r=>e.jsx(X,{course:r},r.id))}),e.jsx(W,{currentPage:b,totalPages:M,onPageChange:A})]}):e.jsx(F,{resetFilters:v})]})]})]})}function oe({}){return[{title:"Каталог курсов"},{name:"description",content:"Выбери подходящий курс и начни обучение программированию прямо сейчас"}]}const de=$(function(){return e.jsx(V,{})});export{de as default,oe as meta};
