import{Z as o}from"./sceneFragmentDeclaration-CNWtVIbJ.js";import{G as m}from"./glTFLoader-BlBnIl-i.js";import{u as h,r as u}from"./model-viewer-CRf71ZHW.js";import"./objectModelMapping-DZbRXB0J.js";import"./with-props-CdbLO-WJ.js";import"./chunk-AYJ5UCUI-B1579ApN.js";import"./waterMaterial-DHEJP-Do.js";const n="KHR_materials_iridescence";class T{constructor(i){this.name=n,this.order=195,this._loader=i,this.enabled=this._loader.isExtensionUsed(n)}dispose(){this._loader=null}loadMaterialPropertiesAsync(i,s,e){return m.LoadExtensionAsync(i,s,this.name,(r,c)=>{const d=new Array;return d.push(this._loader.loadMaterialPropertiesAsync(i,s,e)),d.push(this._loadIridescencePropertiesAsync(r,c,e)),Promise.all(d).then(()=>{})})}_loadIridescencePropertiesAsync(i,s,e){if(!(e instanceof o))throw new Error(`${i}: Material type not supported`);const r=new Array;return e.iridescence.isEnabled=!0,e.iridescence.intensity=s.iridescenceFactor??0,e.iridescence.indexOfRefraction=s.iridescenceIor??s.iridescenceIOR??1.3,e.iridescence.minimumThickness=s.iridescenceThicknessMinimum??100,e.iridescence.maximumThickness=s.iridescenceThicknessMaximum??400,s.iridescenceTexture&&r.push(this._loader.loadTextureInfoAsync(`${i}/iridescenceTexture`,s.iridescenceTexture,c=>{c.name=`${e.name} (Iridescence)`,e.iridescence.texture=c})),s.iridescenceThicknessTexture&&r.push(this._loader.loadTextureInfoAsync(`${i}/iridescenceThicknessTexture`,s.iridescenceThicknessTexture,c=>{c.name=`${e.name} (Iridescence Thickness)`,e.iridescence.thicknessTexture=c})),Promise.all(r).then(()=>{})}}h(n);u(n,!0,t=>new T(t));export{T as KHR_materials_iridescence};
