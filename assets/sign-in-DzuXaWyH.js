import{w as p}from"./with-props-CdbLO-WJ.js";import{a as g,x as y,z as j,o as e,s as d}from"./chunk-AYJ5UCUI-B1579ApN.js";import{u as w}from"./AuthContext-8jqzhkGD.js";import{F as N}from"./HomeIcon-CIA_kStU.js";import{F as v}from"./LockClosedIcon-BS82WYCS.js";import"./config-GGwLlXRi.js";import"./indexedDB-DhaisdTJ.js";function k(){return e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Copyright © ",new Date().getFullYear(),e.jsx("a",{className:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300",children:" EduPlatform"})]})}function F(){var a,o;const[s,t]=g.useState(""),c=y(),u=j(),{login:x}=w(),b=((o=(a=u.state)==null?void 0:a.from)==null?void 0:o.pathname)||"/",f=async l=>{var i,m;l.preventDefault(),t("");const n=new FormData(l.currentTarget);try{await x(n.get("username_or_email"),n.get("password")),c(b,{replace:!0})}catch(r){console.error("Error:",r),(m=(i=r.response)==null?void 0:i.data)!=null&&m.detail?typeof r.response.data.detail=="string"?t(r.response.data.detail):Array.isArray(r.response.data.detail)?t(r.response.data.detail.map(h=>h.msg).join(", ")):t(JSON.stringify(r.response.data.detail)):t("Ошибка аутентификации")}};return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen py-4 sm:py-12",children:e.jsxs("div",{className:"max-w-xs sm:max-w-md mx-auto px-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs(d,{to:"/",className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"На главную"})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-600 rounded-full p-3 mb-4",children:e.jsx(v,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Вход"}),s&&e.jsx("div",{className:"w-full bg-red-600 text-white p-3 mb-4 rounded",children:s}),e.jsxs("form",{onSubmit:f,className:"w-full mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"username_or_email",className:"block text-sm font-medium mb-1",children:"Имя пользователя или Email"}),e.jsx("input",{className:"w-full bg-white dark:bg-gray-800 rounded p-2 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,id:"username_or_email",name:"username_or_email",autoComplete:"username email",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Пароль"}),e.jsx("input",{className:"w-full bg-white dark:bg-gray-800 rounded p-2 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,id:"password",name:"password",type:"password",autoComplete:"current-password"})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{id:"remember",name:"remember",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"}),e.jsx("label",{htmlFor:"remember",className:"ml-2 block text-sm",children:"Запомнить меня"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 mt-3 mb-2",children:"Войти"}),e.jsxs("div",{className:"flex flex-wrap justify-between text-sm mt-4",children:[e.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:"Забыли пароль?"}),e.jsx(d,{to:"/sign-up",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:"Нет аккаунта? Зарегистрироваться"})]})]})]}),e.jsx("div",{className:"mt-8 mb-4 text-center",children:e.jsx(k,{})})]})})}function R({}){return[{title:"Авторизация"},{name:"description",content:"Войдите в свой аккаунт"}]}const q=p(function(){return e.jsx(F,{})});export{q as default,R as meta};
