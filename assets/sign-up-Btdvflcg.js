import{w as p}from"./with-props-CdbLO-WJ.js";import{a as u,x as y,o as e,s as x}from"./chunk-AYJ5UCUI-B1579ApN.js";import{u as w,a as j}from"./AuthContext-8jqzhkGD.js";import{F as N}from"./HomeIcon-CIA_kStU.js";import{F as k}from"./LockClosedIcon-BS82WYCS.js";import"./config-GGwLlXRi.js";import"./indexedDB-DhaisdTJ.js";function v(){return e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Copyright © ",new Date().getFullYear(),e.jsx("a",{className:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300",children:" EduPlatform"})]})}function E(){const[r,t]=u.useState(""),[a,l]=u.useState(!1),b=y(),{login:g}=w(),f=async o=>{var m,d;o.preventDefault(),t(""),l(!0);const s=new FormData(o.currentTarget),n=s.get("username"),h=s.get("email"),i=s.get("password");try{await j.createUser({username:n,email:h,password:i}),await g(n,i),b("/")}catch(c){console.error("Error:",c),t(((d=(m=c.response)==null?void 0:m.data)==null?void 0:d.detail)||"Registration failed")}finally{l(!1)}};return e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen py-4 sm:py-12",children:e.jsxs("div",{className:"max-w-xs sm:max-w-md mx-auto px-4",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs(x,{to:"/",className:"flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors",children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"На главную"})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"bg-blue-600 rounded-full p-3 mb-4",children:e.jsx(k,{className:"h-6 w-6 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Регистрация"}),r&&e.jsx("div",{className:"w-full bg-red-600 text-white p-3 mb-4 rounded",children:r}),e.jsxs("form",{onSubmit:f,className:"w-full mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-1",children:"Имя пользователя или Email"}),e.jsx("input",{className:"w-full bg-white dark:bg-gray-800 rounded p-2 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,id:"username",name:"username",type:"text",autoComplete:"username",autoFocus:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1",children:"Электронная почта"}),e.jsx("input",{className:"w-full bg-white dark:bg-gray-800 rounded p-2 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,id:"email",name:"email",type:"email",autoComplete:"email"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1",children:"Пароль"}),e.jsx("input",{className:"w-full bg-white dark:bg-gray-800 rounded p-2 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0,id:"password",name:"password",type:"password",autoComplete:"new-password"})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{id:"allowExtraEmails",name:"allowExtraEmails",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"}),e.jsx("label",{htmlFor:"allowExtraEmails",className:"ml-2 block text-sm",children:"Я хочу получать новости об обновлениях на электронную почту."})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 mt-3 mb-2",disabled:a,children:a?"Регистрация...":"Зарегистрироваться"}),e.jsx("div",{className:"flex justify-end text-sm mt-4",children:e.jsx(x,{to:"/sign-in",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:"Уже есть аккаунт? Войти"})})]})]}),e.jsx("div",{className:"mt-8 mb-4 text-center",children:e.jsx(v,{})})]})})}function P({}){return[{title:"Регистрация"},{name:"description",content:"Создайте новый аккаунт"}]}const U=p(function(){return e.jsx(E,{})});export{U as default,P as meta};
