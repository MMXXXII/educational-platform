import{Z as u,C as n}from"./sceneFragmentDeclaration-CNWtVIbJ.js";import{G as i}from"./glTFLoader-BlBnIl-i.js";import{u as m,r as d}from"./model-viewer-CRf71ZHW.js";import"./objectModelMapping-DZbRXB0J.js";import"./with-props-CdbLO-WJ.js";import"./chunk-AYJ5UCUI-B1579ApN.js";import"./waterMaterial-DHEJP-Do.js";const a="KHR_materials_specular";class p{constructor(s){this.name=a,this.order=190,this._loader=s,this.enabled=this._loader.isExtensionUsed(a)}dispose(){this._loader=null}loadMaterialPropertiesAsync(s,e,r){return i.LoadExtensionAsync(s,e,this.name,(t,o)=>{const l=new Array;return l.push(this._loader.loadMaterialPropertiesAsync(s,e,r)),l.push(this._loadSpecularPropertiesAsync(t,o,r)),Promise.all(l).then(()=>{})})}_loadSpecularPropertiesAsync(s,e,r){if(!(r instanceof u))throw new Error(`${s}: Material type not supported`);const t=new Array;return e.specularFactor!==void 0&&(r.metallicF0Factor=e.specularFactor),e.specularColorFactor!==void 0&&(r.metallicReflectanceColor=n.FromArray(e.specularColorFactor)),e.specularTexture&&(e.specularTexture.nonColorData=!0,t.push(this._loader.loadTextureInfoAsync(`${s}/specularTexture`,e.specularTexture,o=>{o.name=`${r.name} (Specular)`,r.metallicReflectanceTexture=o,r.useOnlyMetallicFromMetallicReflectanceTexture=!0}))),e.specularColorTexture&&t.push(this._loader.loadTextureInfoAsync(`${s}/specularColorTexture`,e.specularColorTexture,o=>{o.name=`${r.name} (Specular Color)`,r.reflectanceTexture=o})),Promise.all(t).then(()=>{})}}m(a);d(a,!0,c=>new p(c));export{p as KHR_materials_specular};
